<div class="content-header">
    <div class="container">
        <div class="content-header__title-block content-header__title-block_left">
            <h3 class="content-header__title block-title">Анализы</h3>
            <span class="content-header__subtitle block-subtitle">Анализы пациентов</span>
        </div>
    </div>
</div>


<div class="patients-wrapper plain-table plain-table_full">
    <div class="container">
        <div class="plain-table__caption">
            <span class="plain-table__icon ti-marker"></span>Список пациентов на анализ
        </div>
        <table class="plain-table__table">
            <thead class="plain-table__heading">
            <tr>
                <th>ФИО</th>
                <th>Назначен</th>
                <th>Анализ</th>
                <th>Описание</th>
                <th>Дата назначения</th>
            </tr>
            </thead>
            <tbody class='plain-table__value'>
            <tr ng-repeat="analyses in analyzesCtrl.analyses">
                <td data-toggle="modal" data-target="#addAnalysesResult" ng-click="analyzesCtrl.setShownAnalyses($index)">{{analyses.patient_fio}}</td>
                <td data-toggle="modal" data-target="#addAnalysesResult" ng-click="analyzesCtrl.setShownAnalyses($index)">{{analyses.doctor_fio_who_appointed}}</td>
                <td data-toggle="modal" data-target="#addAnalysesResult" ng-click="analyzesCtrl.setShownAnalyses($index)">{{analyses.analysis_name}}</td>
                <td data-toggle="modal" data-target="#addAnalysesResult" ng-click="analyzesCtrl.setShownAnalyses($index)">{{analyses.analysis_description}}</td>
                <td data-toggle="modal" data-target="#addAnalysesResult" ng-click="analyzesCtrl.setShownAnalyses($index)">{{analyses.appointment_date}}</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="modal fade" id="addAnalysesResult">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">{{analyzesCtrl.analyses[analyzesCtrl.index].analysis_name}}</h4>
            </div>
            <div class="modal-body">
                <form name="NewProcedure" class="patient-form" >
                    <div  class="accordion__content">
                        <div class="plain-table__table-wrapper clearfix">
                            <table class="plain-table__table">
                                <tbody class='plain-table__value plain-table__value_non-bordered'>
                                <tr>
                                    <td class="patient-form__label">ФИО</td>
                                    <td class="patient-form__value">{{analyzesCtrl.analyses[analyzesCtrl.index].patient_fio}}</td>
                                </tr>
                                <tr>
                                    <td class="patient-form__label">Кем назначен</td>
                                    <td class="patient-form__value">{{analyzesCtrl.analyses[analyzesCtrl.index].doctor_fio_who_appointed}}</td>
                                </tr>
                                <tr>
                                    <td class="patient-form__label">Описание анализа</td>
                                    <td class="patient-form__value">{{analyzesCtrl.analyses[analyzesCtrl.index].analysis_description}}</td>
                                </tr>
                                    <td class="patient-form__label">Результат анализа</td>
                                    <td class="patient-form__value">
                                        <textarea ng-model="analyzesCtrl.analysesResult.result_description" class="patient-form__textarea" rows="8" > </textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="patient-form__label">Приложение</td>
                                    <td class="patient-form__value">
<!--
                                        <input ng-model="analyzesCtrl.analysesResult.pictures" type="file" name="img" accept="image/jpeg,image/png,image/gif">
-->
                                        <!--<input type="file" nv-file-select uploader="analyzesCtrl.uploader"/><br/>


                                        <ul>
                                            <li ng-repeat="item in analyzesCtrl.uploader.queue">
                                            Name: <span ng-bind="item.file.name"></span><br/>
                                        </li>
                                        </ul>-->

                                        <input type="file" nv-file-select uploader="analyzesCtrl.uploader"/><br/>
                                        <ul>
                                            <li ng-repeat="item in analyzesCtrl.uploader.queue">
                                                Name: <span ng-bind="item.file.name"></span><br/>
                                                <button ng-click="item.upload()">upload</button>
                                            </li>
                                        </ul>

                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <a class="add-block__button button" href="" ng-click="analyzesCtrl.postAnalysesResult()" data-dismiss="modal">
                                <span class="ti-save-alt patient__icon_white"></span>
                                <input class="patient-form__submit" type="submit" value="Отправить">
                            </a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>